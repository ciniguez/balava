<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="es" xml:lang="es" xmlns="http://www.w3.org/1999/xhtml">
<head>
<link rel="stylesheet" type="text/css" href="base.css" />
<link rel="stylesheet" type="text/css" href="exe_effects.css" />
<link rel="stylesheet" type="text/css" href="exe_highlighter.css" />
<link rel="stylesheet" type="text/css" href="content.css" />
<link rel="stylesheet" type="text/css" href="nav.css" />
<meta http-equiv="content-type" content="text/html;  charset=utf-8" />
<title>1.9 Ejemplo MVC | Segundo Bimestre AppWeb </title>
<link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
<meta http-equiv="content-language" content="es" />
<meta name="author" content="Carlos Iniguez" />
<link rel="license" type="text/html" href="http://creativecommons.org/licenses/by-nc/3.0/" />
<meta name="generator" content="eXeLearning 2.5 - exelearning.net" />
<script type="text/javascript" src="exe_jquery.js"></script>
<script type="text/javascript" src="exe_effects.js"></script>
<script type="text/javascript" src="exe_highlighter.js"></script>
<script type="text/javascript" src="common_i18n.js"></script>
<script type="text/javascript" src="common.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
</head>
<body class="exe-web-site" id="exe-node-87"><script type="text/javascript">document.body.className+=" js"</script>
<div id="content">
<p id="skipNav"><a href="#main" class="sr-av">Saltar la navegación</a></p>
<div id="header" ><div id="headerContent">Segundo Bimestre AppWeb</div></div>
<div id="siteNav">
<ul>
   <li><a href="index.html" class="daddy main-node">BIMESTRE II</a></li>
   <li class="current-page-parent"><a href="1_backend.html" class="current-page-parent daddy">1. BACKEND</a>
   <ul>
      <li><a href="11_patrn_de_arquitectura_mvc.html" class="no-ch">1.1 Patrón de Arquitectura MVC</a></li>
      <li><a href="12_mvc_en_escritorio.html" class="no-ch">1.2 MVC en Escritorio</a></li>
      <li><a href="13_mvc_en_web.html" class="no-ch">1.3 MVC en WEB</a></li>
      <li><a href="14_instalacin_de_herramientas.html" class="daddy">1.4 Instalación de Herramientas</a>
      <ul class="other-section">
         <li><a href="141_configurando_el_ambiente_de_desarrollo.html" class="no-ch">1.4.1 Configurando el Ambiente de Desarrollo</a></li>
         <li><a href="142_creacin_de_un_proyecto_web.html" class="no-ch">1.4.2 Creación de un proyecto Web</a></li>
      </ul>
      </li>
      <li><a href="15_principios_tecnolgicos.html" class="no-ch">1.5 Principios Tecnológicos</a></li>
      <li><a href="16_servlets.html" class="daddy">1.6 Servlets</a>
      <ul class="other-section">
         <li><a href="161_ciclo_de_vida.html" class="no-ch">1.6.1 Ciclo de Vida</a></li>
         <li><a href="162_servlet_hola_mundo.html" class="no-ch">1.6.2 Servlet: Hola Mundo</a></li>
         <li><a href="163_recogiendo_parmetros.html" class="no-ch">1.6.3 Recogiendo parámetros</a></li>
         <li><a href="164_reenvo_entre_componentes.html" class="no-ch">1.6.4 Reenvío entre componentes</a></li>
      </ul>
      </li>
      <li><a href="17_jsp.html" class="daddy">1.7 JSP</a>
      <ul class="other-section">
         <li><a href="171_cdigo_java_no_recomendado.html" class="no-ch">1.7.1 Código Java: No recomendado</a></li>
         <li><a href="172_jstl.html" class="no-ch">1.7.2 JSTL</a></li>
         <li><a href="173_jstl_instalacin_y_uso.html" class="no-ch">1.7.3. JSTL: Instalación y Uso</a></li>
         <li><a href="174_ejercicios.html" class="no-ch">1.7.4 Ejercicios</a></li>
      </ul>
      </li>
      <li><a href="18_javabeans.html" class="no-ch">1.8 JavaBeans</a></li>
      <li id="active"><a href="19_ejemplo_mvc.html" class="active no-ch">1.9 Ejemplo MVC</a></li>
      <li><a href="110_persistencia.html" class="no-ch">1.10 Persistencia</a></li>
      <li><a href="111_jdbc.html" class="daddy">1.11 JDBC</a>
      <ul class="other-section">
         <li><a href="1111_cmo_implementar_jdbc.html" class="no-ch">1.11.1 ¿Cómo implementar JDBC?</a></li>
         <li><a href="1112_ejemplo.html" class="no-ch">1.11.2 Ejemplo</a></li>
         <li><a href="1113_ejercicio.html" class="no-ch">1.11.3 Ejercicio</a></li>
      </ul>
      </li>
      <li><a href="112_jpa.html" class="daddy">1.12 JPA</a>
      <ul class="other-section">
         <li><a href="1121_jpa_en_la_arquitectura_web.html" class="no-ch">1.12.1 JPA en la Arquitectura Web</a></li>
         <li><a href="1122_implementaciones.html" class="no-ch">1.12.2 Implementaciones</a></li>
         <li><a href="1123_instalacin.html" class="no-ch">1.12.3 Instalación</a></li>
         <li><a href="1124_ejercicio_creando_proyecto_jpa.html" class="no-ch">1.12.4 Ejercicio: Creando proyecto JPA</a></li>
         <li><a href="1125_arquitectura.html" class="no-ch">1.12.5 Arquitectura</a></li>
         <li><a href="1126_entitymanger.html" class="no-ch">1.12.6 EntityManger</a></li>
         <li><a href="1127_entidades.html" class="no-ch">1.12.7 Entidades</a></li>
         <li><a href="1128_ciclo_de_vida.html" class="no-ch">1.12.8 Ciclo de Vida</a></li>
         <li><a href="1129_relaciones.html" class="no-ch">1.12.9 Relaciones</a></li>
         <li><a href="11291_anotaciones.html" class="no-ch">1.12.9.1 Anotaciones</a></li>
         <li><a href="11292_onetoone.html" class="no-ch">1.12.9.2 OneToOne</a></li>
         <li><a href="11293_onetomany_y_manytoone.html" class="no-ch">1.12.9.3 OneToMany y ManyToOne</a></li>
         <li><a href="11294_manytomany.html" class="no-ch">1.12.9.4 ManyToMany</a></li>
         <li><a href="11295_herencia.html" class="no-ch">1.12.9.5 Herencia</a></li>
         <li><a href="11296_ejemplo_anotaciones_clase_estudiante.html" class="no-ch">1.12.9.6 Ejemplo Anotaciones: Clase Estudiante</a></li>
      </ul>
      </li>
      <li><a href="113_ejercicio_tutorias.html" class="no-ch">1.13 Ejercicio: Tutorias</a></li>
      <li><a href="114_jpql.html" class="daddy">1.14 JPQL</a>
      <ul class="other-section">
         <li><a href="1141_sql_vs_jpql.html" class="no-ch">1.14.1 SQL vs JPQL</a></li>
         <li><a href="1142_ejemplos_de_consultas.html" class="no-ch">1.14.2 Ejemplos de Consultas</a></li>
         <li><a href="1143_ejercicios_propuestos.html" class="no-ch">1.14.3 Ejercicios Propuestos</a></li>
         <li><a href="1144_createquery.html" class="no-ch">1.14.4 CreateQuery</a></li>
         <li><a href="1145_named_queries.html" class="no-ch">1.14.5 Named Queries</a></li>
         <li><a href="1146_autoevaluacin.html" class="no-ch">1.14.6 Autoevaluación</a></li>
         <li><a href="1147_caso_prctico_tutorias.html" class="no-ch">1.14.7 Caso Práctico: Tutorias</a></li>
         <li><a href="1148_recursos.html" class="no-ch">1.14.8 Recursos</a></li>
      </ul>
      </li>
      <li><a href="115_dao_y_otros_patrones_de_acceso_a_datos.html" class="daddy">1.15 DAO y otros patrones de Acceso a Datos</a>
      <ul class="other-section">
         <li><a href="1151_activerecord.html" class="no-ch">1.15.1 ActiveRecord</a></li>
         <li><a href="1152_dao_data_acces_object.html" class="no-ch">1.15.2 DAO (Data Acces Object)</a></li>
         <li><a href="1153_de_activerecord_a_dao.html" class="no-ch">1.15.3 De ActiveRecord a DAO</a></li>
         <li><a href="1154_implementacin_patrn_dao.html" class="no-ch">1.15.4 Implementación patrón DAO</a></li>
         <li><a href="1155_cdigo_dao.html" class="no-ch">1.15.5 Código DAO</a></li>
      </ul>
      </li>
      <li><a href="116_servicios_web.html" class="daddy">1.16 Servicios Web</a>
      <ul class="other-section">
         <li><a href="1161_concepto.html" class="no-ch">1.16.1 Concepto</a></li>
         <li><a href="1163_servicios_web_soap.html" class="daddy">1.16.3 Servicios Web SOAP</a>
         <ul class="other-section">
            <li><a href="11631_prctica_ws_soap_login_persona.html" class="no-ch">1.16.3.1 Práctica WS SOAP: Login Persona</a></li>
         </ul>
         </li>
         <li><a href="1164_servicios_web_rest.html" class="daddy">1.16.4 Servicios Web REST</a>
         <ul class="other-section">
            <li><a href="1164_1_tecnologas.html" class="no-ch">1.16.4 .1 Tecnologías</a></li>
            <li><a href="11642_ejercicio_1_hola_rest.html" class="no-ch">1.16.4.2 Ejercicio 1: Hola Rest</a></li>
            <li><a href="11643_recursos.html" class="no-ch">1.16.4.3 Recursos</a></li>
            <li><a href="11644_ejercicio_2_recursos.html" class="no-ch">1.16.4.4 Ejercicio 2: Recursos</a></li>
            <li><a href="11645_parmetros.html" class="no-ch">1.16.4.5 Parámetros</a></li>
            <li><a href="11646_ejercicio_3_parmetros.html" class="no-ch">1.16.4.6 Ejercicio 3: Parámetros</a></li>
            <li><a href="11647_ejercicio_4_crud.html" class="no-ch">1.16.4.7 Ejercicio 4: CRUD</a></li>
         </ul>
         </li>
      </ul>
      </li>
   </ul>
   </li>
   <li><a href="2_frontend_javascript.html" class="daddy">2. FRONTEND (JavaScript)</a>
   <ul class="other-section">
      <li><a href="introduccin_a_js.html" class="no-ch">Introducción a JS</a></li>
      <li><a href="creacin_de_contenido_dinmico.html" class="no-ch">Creación de Contenido Dinámico</a></li>
      <li><a href="ajax.html" class="no-ch">Ajax</a></li>
      <li><a href="libreras_js.html" class="daddy">Librerías JS</a>
      <ul class="other-section">
         <li><a href="jquery.html" class="daddy">JQuery</a>
         <ul class="other-section">
            <li><a href="introduccin.html" class="no-ch">Introducción</a></li>
            <li><a href="instalacin.html" class="no-ch">Instalación</a></li>
            <li><a href="iniciacin.html" class="no-ch">Iniciación</a></li>
            <li><a href="selectores.html" class="no-ch">Selectores</a></li>
            <li><a href="eventos.html" class="no-ch">Eventos</a></li>
            <li><a href="modificando_clases.html" class="daddy">Modificando clases</a>
            <ul class="other-section">
               <li><a href="ejercicio.html" class="no-ch">Ejercicio</a></li>
            </ul>
            </li>
            <li><a href="modificando_atributos.html" class="no-ch">Modificando atributos</a></li>
            <li><a href="modificando_contenido.html" class="no-ch">Modificando contenido</a></li>
            <li><a href="formularios.html" class="no-ch">Formularios</a></li>
            <li><a href="modificando_hojas_de_estilo.html" class="daddy">Modificando Hojas de estilo</a>
            <ul class="other-section">
               <li><a href="ejercicio_redimensionamiento.html" class="no-ch">Ejercicio Redimensionamiento</a></li>
            </ul>
            </li>
            <li><a href="efectos_visuales.html" class="daddy">Efectos visuales</a>
            <ul class="other-section">
               <li><a href="ejercicio_efectos_visuales.html" class="no-ch">Ejercicio: Efectos Visuales</a></li>
            </ul>
            </li>
            <li><a href="ajax0.html" class="no-ch">Ajax</a></li>
         </ul>
         </li>
         <li><a href="prctica_js.html" class="no-ch">Práctica JS</a></li>
      </ul>
      </li>
   </ul>
   </li>
   <li><a href="3_cms.html" class="daddy">3. CMS</a>
   <ul class="other-section">
      <li><a href="qu_es_un_cms.html" class="no-ch">¿Qué es un CMS?</a></li>
      <li><a href="qu_se_puede_hacer_con_un__cms.html" class="no-ch">¿Qué se puede hacer con un  CMS?</a></li>
      <li><a href="caractersticas_de_un_cms.html" class="no-ch">Características de un CMS</a></li>
      <li><a href="con_y_sin_un_cms.html" class="no-ch">Con y sin un CMS</a></li>
      <li><a href="cms_populares.html" class="no-ch">CMS populares</a></li>
      <li><a href="ejemplos.html" class="no-ch">Ejemplos</a></li>
      <li><a href="wordpress.html" class="daddy">WordPress</a>
      <ul class="other-section">
         <li><a href="ventajas_de_wordpress.html" class="no-ch">Ventajas de Wordpress</a></li>
         <li><a href="estructura_de_wordpress.html" class="no-ch">Estructura de WordPress</a></li>
         <li><a href="perfiles_de_usuarios.html" class="no-ch">Perfiles de Usuarios</a></li>
         <li><a href="instalacin0.html" class="no-ch">Instalación</a></li>
         <li><a href="pantalla_de_adminsitracin.html" class="no-ch">Pantalla de adminsitración</a></li>
         <li><a href="estructura_de_directorio_wordpress.html" class="no-ch">Estructura de Directorio Wordpress</a></li>
         <li><a href="instalacin_en_host.html" class="daddy">Instalación en host</a>
         <ul class="other-section">
            <li><a href="ejemplos_de_instalacin.html" class="no-ch">Ejemplos de instalación</a></li>
         </ul>
         </li>
      </ul>
      </li>
   </ul>
   </li>
</ul>
</div>
<div id='topPagination'>
<div class="pagination noprt">
<a href="18_javabeans.html" class="prev"><span><span>&laquo; </span>Anterior</span></a> <span class="sep">| </span><a href="110_persistencia.html" class="next"><span>Siguiente<span> &raquo;</span></span></a>
</div>
</div>
<div id="main-wrapper">
<div id="main"><a name="main"></a>
<div id="nodeDecoration"><h1 id="nodeTitle">1.9 Ejemplo MVC</h1></div>
<div class="iDevice_wrapper activityIdevice em_iDevice" id="id84">
<div class="iDevice emphasis1" >
<div class="iDevice_header"><h2 class="iDeviceTitle">Ejercicio: Implementación MVC</h2></div>
<div class="iDevice_inner">
<div class="iDevice_content_wrapper">
<div id="ta84_110_2" class="block iDevice_content">
<p>El objetivo de este ejercicio es llevar a la práctica los conocimientos hasta aquí estudiados. Implementaremos una aplicación que consulta los datos de una persona. Seguiremos el patrón MVC, como lo muestra la figura, ubicando cada uno de los conceptos aprendidos:</p>
<ul>
<li>Servlets como controladores,</li>
<li>JSP como vistas y</li>
<li>JavaBeans como el modelo.</li>
</ul>
<p>Para facilidad de entendimiento, en este ejercicio se provee el código de cada punto mencionado.</p>
<hr />
<p><b>Instrucciones</b></p>
<ol>
<li><strong>Crea un Dynamic Web Project con el nombre: mvc_1_persona</strong></li>
<li><strong>Crea un paquete com.modelo</strong>
<ol>
<li><strong>Crea el Java Bean: Persona, dentro del paquete</strong></li>
</ol>
</li>
<li><strong>Crea un paquete com.controlador</strong>
<ol>
<li><strong>Crea el Servlet: PersonaController, dentro del paquete</strong><strong></strong></li>
</ol>
</li>
<li><strong>En el directorio WebContent, crea un directorio denominado JSPs que contenga:</strong>
<ol>
<li><strong>pagina persona.jsp</strong></li>
</ol>
</li>
</ol>
</div>
</div>
</div>
</div>
</div>
<div class="iDevice_wrapper textIdevice" id="id70">
<div class="iDevice emphasis0" >
<div id="ta70_117_2" class="block iDevice_content">
<div class="exe-text"><p><img src="MVC.svg" width="751" height="389" alt="Arquitectura MVC ejemplo Persona" style="display: block; margin-left: auto; margin-right: auto;" /></p></div>
</div>
</div>
</div>
<div class="iDevice_wrapper textIdevice em_iDevice" id="id71">
<div class="iDevice emphasis1" >
<div class="iDevice_header iDevice_header_noIcon"><h2 class="iDeviceTitle">Modelo: javabeans</h2></div>
<div class="iDevice_inner">
<div class="iDevice_content_wrapper">
<div id="ta71_118_2" class="block iDevice_content">
<div class="exe-text"><div class="exe-fx exe-tabs">
<h2>Modelo: Persona (JavaBean)</h2>
<div class="highlighted-code language-java line-numbers">
<div>
<pre><code>package ec.edu.epn.modelo;

import java.io.Serializable;

public class Persona implements Serializable{

	private static final long serialVersionUID = 1L;
	private int id;
	private String nombre;
	private String[] idiomas = {"es", "en"};
	
	//Constructor sin parámetros y obligatorio
	public Persona() {}
	public Persona(int id, String nombre) {
		this.setId(id);
		this.setNombre(nombre);
	}
	public int getId() {
		return id;
	}
	public void setId(int id) {
		this.id = id;
	}
	public String getNombre() {
		return nombre;
	}
	public void setNombre(String nombre) {
		this.nombre = nombre;
	}
	public String[] getIdiomas() {
		return idiomas;
	}
	public void setIdiomas(String[] idiomas) {
		this.idiomas = idiomas;
	}
	

}</code></pre>
</div>
</div>
<p></p>
<h2>Controlador: PersonaController (servlet)</h2>
<div class="highlighted-code language-java line-numbers">
<div>
<pre><code>package ec.edu.epn.controlador;

import java.io.IOException;

import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import ec.edu.epn.modelo.Persona;

@WebServlet("/PersonaController")
public class PersonaController extends HttpServlet {

	@Override
	protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
		Persona persona = new Persona();
		String url;
		try {
			persona.setId(Integer.valueOf(req.getParameter("id")));
			persona.setNombre(req.getParameter("nombre"));
			req.setAttribute("persona", persona);
			url = "/JSPs/persona.jsp";
		} catch (Exception e) {
			url = "/JSPs/error.jsp";
		}
		//reenvia datos a persona.jsp
		getServletContext().getRequestDispatcher(url).forward(req, resp);

	}

	@Override
	protected void doPost(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {

	}

	private static final long serialVersionUID = 1L;

}
</code></pre>
</div>
</div>
<p><br /><br /></p>
<h2>Vista: persona.jsp (JSP + JSTL)</h2>
<p>persona.jsp</p>
<div class="highlighted-code language-markup line-numbers">
<div>
<pre><code>&lt;%@ page language="java" contentType="text/html; charset=UTF-8"
	pageEncoding="UTF-8"%&gt;
&lt;%@taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%&gt;
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
&lt;meta charset="UTF-8"&gt;
&lt;title&gt;JSTL&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
	&lt;h1&gt;Uso de JSTLs&lt;/h1&gt;
	&lt;h2&gt;Acceso a Objetos&lt;/h2&gt;
	&lt;c:set var="p1" value="${requestScope['persona']}" /&gt;
	&lt;c:set var="p2" scope="request" value="${persona}" /&gt;
	&lt;c:set var="p3" scope="session" value="${persona}" /&gt;

	&lt;p&gt;Id: ${p1.id}&lt;/p&gt;
	&lt;p&gt;Nombre: ${p1.nombre}&lt;/p&gt;

	&lt;h2&gt;Sentencia if&lt;/h2&gt;

	&lt;c:if test="${p1.id == 666}"&gt;
		&lt;p&gt;Dentro del if: es un demonio&lt;/p&gt;
	&lt;/c:if&gt;

	&lt;h2&gt;Sentencia Switch&lt;/h2&gt;

	&lt;c:choose&gt;
		&lt;c:when test="${p1.id==1}"&gt;Es 1&lt;/c:when&gt;
		&lt;c:when test="${p1.id==2}"&gt;Es 2&lt;/c:when&gt;
		&lt;c:otherwise&gt;
			&lt;p&gt;Es mayor que 2&lt;/p&gt;
		&lt;/c:otherwise&gt;
	&lt;/c:choose&gt;

	&lt;h2&gt;Colecciones&lt;/h2&gt;
	&lt;p&gt;Idiomas:&lt;/p&gt;
	&lt;ul&gt;
		&lt;c:forEach var="idioma" items="${p1.idiomas}"&gt;
			&lt;li&gt;${idioma}&lt;/li&gt;
		&lt;/c:forEach&gt;
	&lt;/ul&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>
</div>
</div>
<p>error.jsp</p>
<div class="highlighted-code language-markup line-numbers">
<div>
<pre><code>&lt;%@ page language="java" contentType="text/html; charset=UTF-8"
	pageEncoding="UTF-8"%&gt;
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
&lt;title&gt;MVC - java&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
	&lt;h1&gt;Respuesta del controlador&lt;/h1&gt;
	&lt;p&gt;Error. Se debe añadir a la URL: ?id=666&amp;nombre=uno&lt;/p&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>
</div>
</div>
</div>
<p></p></div>
</div>
</div>
</div>
</div>
</div>
<div id="packageLicense" class="cc cc-by-nc">
<p><span>Obra publicada con</span> <a rel="license" href="http://creativecommons.org/licenses/by-nc/3.0/">Licencia Creative Commons Reconocimiento No comercial 3.0</a></p>
</div>
</div>
</div>
<div id='bottomPagination'>
<div class="pagination noprt">
<a href="18_javabeans.html" class="prev"><span><span>&laquo; </span>Anterior</span></a> <span class="sep">| </span><a href="110_persistencia.html" class="next"><span>Siguiente<span> &raquo;</span></span></a>
</div>
</div>
<div id="siteFooter">Created by Carlos Iniguez - Escuela Politécnica Nacional</div></div>
<script type="text/javascript" src="_intef_js.js"></script></body></html>