<!doctype html>
<html lang="es">
<head>
<link rel="stylesheet" type="text/css" href="base.css" />
<link rel="stylesheet" type="text/css" href="exe_effects.css" />
<link rel="stylesheet" type="text/css" href="exe_highlighter.css" />
<link rel="stylesheet" type="text/css" href="content.css" />
<link rel="stylesheet" type="text/css" href="nav.css" />
<meta http-equiv="content-type" content="text/html;  charset=utf-8" />
<title>Ejercicio 2: Recursos | Fundamentos de JAVA WEB </title>
<link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
<meta name="author" content="Carlos Iniguez" />
<link rel="license" type="text/html" href="http://creativecommons.org/licenses/by-nc/3.0/" />
<meta name="generator" content="eXeLearning 2.5 - exelearning.net" />
<!--[if lt IE 9]><script type="text/javascript" src="exe_html5.js"></script><![endif]-->
<script type="text/javascript" src="exe_jquery.js"></script>
<script type="text/javascript" src="exe_effects.js"></script>
<script type="text/javascript" src="exe_highlighter.js"></script>
<script type="text/javascript" src="common_i18n.js"></script>
<script type="text/javascript" src="common.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
</head>
<body class="exe-web-site" id="exe-node-120"><script type="text/javascript">document.body.className+=" js"</script>
<div id="content">
<p id="skipNav"><a href="#main" class="sr-av">Saltar la navegación</a></p>
<header id="header" ><div id="headerContent">Fundamentos de JAVA WEB</div></header>
<nav id="siteNav">
<ul>
   <li><a href="index.html" class="daddy main-node">Java Web</a></li>
   <li><a href="introduccin.html" class="daddy">Introducción</a>
   <ul class="other-section">
      <li><a href="patrn_de_arquitectura_mvc.html" class="no-ch">Patrón de Arquitectura MVC</a></li>
      <li><a href="mvc_en_escritorio.html" class="no-ch">MVC en Escritorio</a></li>
      <li><a href="mvc_en_web.html" class="no-ch">MVC en WEB</a></li>
   </ul>
   </li>
   <li><a href="instalacin_de_herramientas.html" class="daddy">Instalación de Herramientas</a>
   <ul class="other-section">
      <li><a href="configurando_el_ambiente_de_desarrollo.html" class="no-ch">Configurando el Ambiente de Desarrollo</a></li>
      <li><a href="creacin_de_un_proyecto_web.html" class="no-ch">Creación de un proyecto Web</a></li>
   </ul>
   </li>
   <li><a href="principios_tecnolgicos.html" class="daddy">Principios Tecnológicos</a>
   <ul class="other-section">
      <li><a href="servlets.html" class="daddy">Servlets</a>
      <ul class="other-section">
         <li><a href="ciclo_de_vida.html" class="no-ch">Ciclo de Vida</a></li>
         <li><a href="servlet_hola_mundo.html" class="no-ch">Servlet: Hola Mundo</a></li>
         <li><a href="recogiendo_parmetros.html" class="no-ch">Recogiendo parámetros</a></li>
         <li><a href="reenvo_entre_componentes.html" class="no-ch">Reenvío entre componentes</a></li>
      </ul>
      </li>
      <li><a href="jsp.html" class="daddy">JSP</a>
      <ul class="other-section">
         <li><a href="cdigo_java_no_recomendado.html" class="no-ch">Código Java: No recomendado</a></li>
         <li><a href="jstl.html" class="no-ch">JSTL</a></li>
         <li><a href="jstl_instalacin_y_uso.html" class="no-ch">JSTL: Instalación y Uso</a></li>
         <li><a href="ejercicios.html" class="no-ch">Ejercicios</a></li>
      </ul>
      </li>
      <li><a href="javabeans.html" class="no-ch">JavaBeans</a></li>
      <li><a href="ejemplo_mvc.html" class="no-ch">Ejemplo MVC</a></li>
   </ul>
   </li>
   <li><a href="persistencia.html" class="daddy">Persistencia</a>
   <ul class="other-section">
      <li><a href="jdbc.html" class="daddy">JDBC</a>
      <ul class="other-section">
         <li><a href="cmo_implementar_jdbc.html" class="no-ch">¿Cómo implementar JDBC?</a></li>
         <li><a href="ejemplo.html" class="no-ch">Ejemplo</a></li>
         <li><a href="ejercicio.html" class="no-ch">Ejercicio</a></li>
      </ul>
      </li>
      <li><a href="jpa.html" class="daddy">JPA</a>
      <ul class="other-section">
         <li><a href="jpa_en_la_arquitectura_web.html" class="no-ch">JPA en la Arquitectura Web</a></li>
         <li><a href="implementaciones.html" class="no-ch">Implementaciones</a></li>
         <li><a href="instalacin.html" class="no-ch">Instalación</a></li>
         <li><a href="ejercicio_creando_proyecto_jpa.html" class="no-ch">Ejercicio: Creando proyecto JPA</a></li>
         <li><a href="arquitectura.html" class="daddy">Arquitectura</a>
         <ul class="other-section">
            <li><a href="entitymanger.html" class="no-ch">EntityManger</a></li>
            <li><a href="entidades.html" class="no-ch">Entidades</a></li>
            <li><a href="ciclo_de_vida0.html" class="no-ch">Ciclo de Vida</a></li>
         </ul>
         </li>
         <li><a href="relaciones.html" class="daddy">Relaciones</a>
         <ul class="other-section">
            <li><a href="anotaciones.html" class="no-ch">Anotaciones</a></li>
            <li><a href="onetoone.html" class="no-ch">OneToOne</a></li>
            <li><a href="onetomany_y_manytoone.html" class="no-ch">OneToMany y ManyToOne</a></li>
            <li><a href="manytomany.html" class="no-ch">ManyToMany</a></li>
            <li><a href="herencia.html" class="no-ch">Herencia</a></li>
         </ul>
         </li>
         <li><a href="ejemplo_anotaciones_clase_estudiante.html" class="no-ch">Ejemplo Anotaciones: Clase Estudiante</a></li>
         <li><a href="ejercicio_tutorias.html" class="no-ch">Ejercicio: Tutorias</a></li>
         <li><a href="jpql.html" class="daddy">JPQL</a>
         <ul class="other-section">
            <li><a href="sql_vs_jpql.html" class="no-ch">SQL vs JPQL</a></li>
            <li><a href="ejemplos_de_consultas.html" class="no-ch">Ejemplos de Consultas</a></li>
            <li><a href="ejercicios_propuestos.html" class="no-ch">Ejercicios Propuestos</a></li>
            <li><a href="createquery.html" class="no-ch">CreateQuery</a></li>
            <li><a href="named_queries.html" class="no-ch">Named Queries</a></li>
            <li><a href="autoevaluacin.html" class="no-ch">Autoevaluación</a></li>
            <li><a href="caso_prctico_tutorias.html" class="no-ch">Caso Práctico: Tutorias</a></li>
            <li><a href="recursos.html" class="no-ch">Recursos</a></li>
         </ul>
         </li>
      </ul>
      </li>
      <li><a href="dao_y_otros_patrones_de_acceso_a_datos.html" class="daddy">DAO y otros patrones de Acceso a Datos</a>
      <ul class="other-section">
         <li><a href="activerecord.html" class="no-ch">ActiveRecord</a></li>
         <li><a href="dao_data_acces_object.html" class="no-ch">DAO (Data Acces Object)</a></li>
         <li><a href="de_activerecord_a_dao.html" class="no-ch">De ActiveRecord a DAO</a></li>
         <li><a href="implementacin_patrn_dao.html" class="daddy">Implementación patrón DAO</a>
         <ul class="other-section">
            <li><a href="cdigo_dao.html" class="no-ch">Código DAO</a></li>
         </ul>
         </li>
      </ul>
      </li>
   </ul>
   </li>
   <li class="current-page-parent"><a href="servicios_web.html" class="current-page-parent daddy">Servicios Web</a>
   <ul>
      <li><a href="concepto.html" class="no-ch">Concepto</a></li>
      <li><a href="servicios_web_soap.html" class="daddy">Servicios Web SOAP</a>
      <ul class="other-section">
         <li><a href="prctica_login_persona.html" class="no-ch">Práctica: Login Persona</a></li>
      </ul>
      </li>
      <li class="current-page-parent"><a href="servicios_web_rest.html" class="current-page-parent daddy">Servicios Web REST</a>
      <ul>
         <li><a href="tecnologas.html" class="no-ch">Tecnologías</a></li>
         <li><a href="ejercicio_1_hola_rest.html" class="no-ch">Ejercicio 1: Hola Rest</a></li>
         <li><a href="recursos0.html" class="no-ch">Recursos</a></li>
         <li id="active"><a href="ejercicio_2_recursos.html" class="active no-ch">Ejercicio 2: Recursos</a></li>
         <li><a href="parmetros.html" class="no-ch">Parámetros</a></li>
         <li><a href="ejercicio_3_parmetros.html" class="no-ch">Ejercicio 3: Parámetros</a></li>
         <li><a href="ejercicio_4_crud.html" class="no-ch">Ejercicio 4: CRUD</a></li>
      </ul>
      </li>
   </ul>
   </li>
   <li><a href="proyecto_final.html" class="daddy">PROYECTO FINAL</a>
   <ul class="other-section">
      <li><a href="pom.html" class="no-ch">POM</a></li>
      <li><a href="base_de_datos.html" class="daddy">BASE DE DATOS</a>
      <ul class="other-section">
         <li><a href="script_de_creacin.html" class="no-ch">Script de Creación</a></li>
      </ul>
      </li>
      <li><a href="modelo.html" class="no-ch">MODELO</a></li>
   </ul>
   </li>
</ul>
</nav>
<div id='topPagination'>
<nav class="pagination noprt">
<a href="recursos0.html" class="prev"><span><span>&laquo; </span>Anterior</span></a> <span class="sep">| </span><a href="parmetros.html" class="next"><span>Siguiente<span> &raquo;</span></span></a>
</nav>
</div>
<div id="main-wrapper">
<section id="main">
<header id="nodeDecoration"><h1 id="nodeTitle">Ejercicio 2: Recursos</h1></header>
<article class="iDevice_wrapper objectivesIdevice em_iDevice" id="id149">
<div class="iDevice emphasis1" >
<header class="iDevice_header"><h1 class="iDeviceTitle">Objetivos</h1></header>
<div class="iDevice_inner">
<div class="iDevice_content_wrapper">
<div id="ta149_141_2" class="block iDevice_content">
<p>En este ejercicio pondremos en práctica y analizaremos:</p>
<ul>
<li>la interacción de un servicio web con el modelo (Objetos del dominio)</li>
<li>la anotación @Produces para producir la información de una persona en tres formatos diferentes (XML, JSON y TEXT)</li>
<li>la anotación @Path a tanto a nivel de Clase como de Método</li>
</ul>
</div>
</div>
</div>
</div>
</article>
<article class="iDevice_wrapper textIdevice em_iDevice" id="id150">
<div class="iDevice emphasis1" >
<header class="iDevice_header" style="background-image:url(icon_puzzle.png)"><h1 class="iDeviceTitle">Arquitectura del ejercicio</h1></header>
<div class="iDevice_inner">
<div class="iDevice_content_wrapper">
<div id="ta150_142_2" class="block iDevice_content">
<div class="exe-text"><p><img src="img0.3.png" width="628" height="582" alt="ejercicio 2 arquitectura" style="display: block; margin-left: auto; margin-right: auto;" /></p></div>
</div>
</div>
</div>
</div>
</article>
<article class="iDevice_wrapper textIdevice em_iDevice" id="id151">
<div class="iDevice emphasis1" >
<header class="iDevice_header" style="background-image:url(icon_classroom.png)"><h1 class="iDeviceTitle">Instrucciones</h1></header>
<div class="iDevice_inner">
<div class="iDevice_content_wrapper">
<div id="ta151_143_2" class="block iDevice_content">
<div class="exe-text"><ol>
<li>Crea un proyecto "Dynamic Web Project". Lo llamaremos: "<strong>rest_ejercicio2_formato</strong>"
<ol>
<li>Check en descriptor de despliegue (web.xml)</li>
<li>En la carpeta <strong>Web-INF/lib </strong>copiar las librerías para Servicios Web (Jersey, Jackson, JAXB).
<ol>
<li>Puedes descargarlas del apartado Servicios Web-REST de :<a href="https://ciniguez.github.io/balava/libreriasjava/">https://ciniguez.github.io/balava/libreriasjava/</a>: </li>
</ol>
</li>
</ol>
</li>
<li>Creación del Modelo:
<ol>
<li>Crea el paquete con el nombre <strong>modelo</strong></li>
<li>Crea la Clase <strong>Persona </strong>en el paquete "modelo" (<em>Ver Persona.java</em>)
<ol>
<li>Crea un constructor vacío y los accesores de los métodos privados (Getters y Setters)</li>
<li>Anota la Clase Persona con <code>@XmlRootElement</code> . Esta notación de JAXB permitirá convertir el objeto Persona en XML.</li>
</ol>
</li>
</ol>
</li>
<li>Creación del DAO:
<ol>
<li>Crea el paquete <strong>DAO</strong></li>
<li>Crea la Clase <strong>ImplPersonaDAO </strong>en el paquete "DAO" (<em>Ver ImplPeresonaDAO.java</em>)</li>
</ol>
</li>
<li>Creación del Servicio Web:
<ol>
<li>Crea el paquete <strong>serviciosrest.persona</strong></li>
<li>En el web.xml, asocia el paquete de recursos al servlet de Jersey (<em>ver línea 12 del fichero: web.xml</em>)</li>
<li>Crea la clase <strong>FormatosRecurso </strong>con los tres métodos: getPersonaXML, getPersona JSON y getPersonaTEXT. (<em>Ver FormatosRecurso.java</em>)</li>
<li>Utiliza la notación @Produces para indicar el tipo de "media" que cada método producirá (APPLICATION_XML, APPLICATION_JSON y TEXT_PLAIN, respectivamente)</li>
</ol>
</li>
<li>Usa un cliente de Servicios REST (ej. Advanced Rest Client) para consumir los diferentes servicios. Usa las siguientes URLs:
<ol>
<li>Para el formato XML: <a href="http://localhost:8080/5_serviciosweb_1/rest/personasformato/xml">http://localhost:8080/5_serviciosweb_1/rest/personasformato/xml</a></li>
<li>Para el formato JSON: <a href="http://localhost:8080/5_serviciosweb_1/rest/personasformato/json">http://localhost:8080/5_serviciosweb_1/rest/personasformato/json</a></li>
<li>Para el formato TEXT: <a href="http://localhost:8080/5_serviciosweb_1/rest/personasformato/txt">http://localhost:8080/5_serviciosweb_1/rest/personasformato/txt</a></li>
</ol>
</li>
</ol>
<p></p></div>
</div>
</div>
</div>
</div>
</article>
<article class="iDevice_wrapper textIdevice em_iDevice" id="id152">
<div class="iDevice emphasis1" >
<header class="iDevice_header" style="background-image:url(icon_presentation.png)"><h1 class="iDeviceTitle">Código</h1></header>
<div class="iDevice_inner">
<div class="iDevice_content_wrapper">
<div id="ta152_144_2" class="block iDevice_content">
<div class="exe-text"><div class="exe-fx exe-tabs">
<h2>Persona.java</h2>
<div class="highlighted-code language-java line-numbers">
<div>
<pre><code>package modelo;
import java.io.Serializable;
import javax.xml.bind.annotation.XmlRootElement;

@XmlRootElement
public class Persona implements Serializable{

	private static final long serialVersionUID = 1L;
	private Integer id;
	private String nombre;
	private String apellido;

	public Persona() {}
	
	public Persona(Integer id, String nombre, String apellido) {
		this.id = id;
		this.nombre = nombre;
		this.apellido = apellido;
	}

	public Integer getId() {
		return id;
	}

	public void setId(Integer id) {
		this.id = id;
	}

	public String getNombre() {
		return nombre;
	}

	public void setNombre(String nombre) {
		this.nombre = nombre;
	}

	public String getApellido() {
		return apellido;
	}

	public void setApellido(String apellido) {
		this.apellido = apellido;
	}
	@Override
	public int hashCode() {
		int hash = 0;
		hash += (id != null ? id.hashCode() : 0);
		return hash;
	}

	@Override
	public boolean equals(Object object) {
		if(!(object instanceof Persona)) {
			return false;
		}
		Persona other = (Persona) object;
		if((this.id== null &amp;&amp; other.id!= null)||(this.id!= null &amp;&amp; !this.id.equals(other.id))) {
			return false;
		}
		return true;
	}

	@Override
	public String toString() {
		return "Usuario: "+ this.apellido+ " "+this.nombre;
	}
	
}
</code></pre>
</div>
</div>
<p><br /><br /></p>
<h2>ImplPersonaDAO.java</h2>
<div class="highlighted-code language-java line-numbers">
<div>
<pre><code>package DAO;

import java.util.ArrayList;
import java.util.List;
import modelo.Persona;

public class ImplPersonaDAO {

	public static List&lt;Persona&gt; getPersonas() {
		List&lt;Persona&gt; personas = new ArrayList&lt;Persona&gt;();
		personas.add(new Persona(1, "Carlos", "Iniguez"));
		personas.add(new Persona(2, "Pedro", "Garcia"));
		return personas;
	}

	public static Persona getPersonasById(int id) {
		List&lt;Persona&gt; personas = ImplPersonaDAO.getPersonas();

		for (Persona persona : personas) {
			if (persona.getId().equals(id)) {
				return persona;
			}
		}

		return null;
	}

	public static void ActualizarPersona(Persona p) {

	}

}
</code></pre>
</div>
</div>
<p><br /><br /></p>
<h2>FormatosRecurso.java</h2>
<div class="highlighted-code language-java line-numbers">
<div>
<pre><code>package serviciosrest.persona;
import javax.ws.rs.*;
import javax.ws.rs.core.MediaType;
import javax.ws.rs.core.Response;
import DAO.ImplPersonaDAO;
import modelo.Persona;

@Path("/personasformato")
public class FormatosRecurso {
	/**
	 * Obtener la información en XML
	 * @return Persona en formato XML
	 */
	@GET
	@Path("/xml")
	@Produces(MediaType.APPLICATION_XML)
	public Response getPersonaXML() {
		Persona persona = ImplPersonaDAO.getPersonasById(1);
		return Response.ok(persona).build();
	}

	/**
	 * Obtener la información en JSON
	 * @return Persona en formato JSON
	 */
	@GET
	@Path("/json")
	@Produces(MediaType.APPLICATION_JSON)
	public Response getPersonaJSON() {
		Persona persona = ImplPersonaDAO.getPersonasById(1);
		return Response.ok(persona).build();
	}

	/**
	 * Obtener la información en Texto
	 * @return Persona en formato TEXT
	 */
	@GET
	@Path("/txt")
	@Produces(MediaType.TEXT_PLAIN)
	public Response getPersonaTEXT(){
		Persona persona = ImplPersonaDAO.getPersonasById(1);
		return Response.ok(persona.toString()).build();
	}
}
</code></pre>
</div>
</div>
<h2>web.xml</h2>
<div class="highlighted-code language-markup line-numbers">
<div>
<pre><code>&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd" id="WebApp_ID" version="3.0"&gt;
  &lt;display-name&gt;5_serviciosweb_1&lt;/display-name&gt;
  &lt;welcome-file-list&gt;
    &lt;welcome-file&gt;index.html&lt;/welcome-file&gt;
  &lt;/welcome-file-list&gt;
  &lt;servlet&gt;
    &lt;servlet-name&gt;Jersey REST Service&lt;/servlet-name&gt;
    &lt;servlet-class&gt;org.glassfish.jersey.servlet.ServletContainer&lt;/servlet-class&gt;
    &lt;init-param&gt;
      &lt;param-name&gt;jersey.config.server.provider.packages&lt;/param-name&gt;
      &lt;param-value&gt;serviciosrest.persona&lt;/param-value&gt;
    &lt;/init-param&gt;
    &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;
  &lt;/servlet&gt;
  &lt;servlet-mapping&gt;
    &lt;servlet-name&gt;Jersey REST Service&lt;/servlet-name&gt;
    &lt;url-pattern&gt;/rest/*&lt;/url-pattern&gt;
  &lt;/servlet-mapping&gt;
&lt;/web-app&gt;</code></pre>
</div>
</div>
<p><br /><br /></p>
</div>
<p></p></div>
</div>
</div>
</div>
</div>
</article>
<div id="packageLicense" class="cc cc-by-nc">
<p><span>Obra publicada con</span> <a rel="license" href="http://creativecommons.org/licenses/by-nc/3.0/">Licencia Creative Commons Reconocimiento No comercial 3.0</a></p>
</div>
</section>
</div>
<div id='bottomPagination'>
<nav class="pagination noprt">
<a href="recursos0.html" class="prev"><span><span>&laquo; </span>Anterior</span></a> <span class="sep">| </span><a href="parmetros.html" class="next"><span>Siguiente<span> &raquo;</span></span></a>
</nav>
</div>
<footer id="siteFooter">Created by Carlos Iniguez - Escuela Politécnica Nacional</footer></div>
<script type="text/javascript" src="_intef_js.js"></script></body></html>