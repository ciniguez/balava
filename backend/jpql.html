<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="es" xml:lang="es" xmlns="http://www.w3.org/1999/xhtml">
<head>
<link rel="stylesheet" type="text/css" href="base.css" />
<link rel="stylesheet" type="text/css" href="content.css" />
<link rel="stylesheet" type="text/css" href="nav.css" />
<meta http-equiv="content-type" content="text/html;  charset=utf-8" />
<title>JPQL | Fundamentos de JAVA WEB </title>
<link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
<meta http-equiv="content-language" content="es" />
<meta name="author" content="Carlos Iniguez" />
<link rel="license" type="text/html" href="http://creativecommons.org/licenses/by-nc/3.0/" />
<meta name="generator" content="eXeLearning 2.5 - exelearning.net" />
<script type="text/javascript" src="exe_jquery.js"></script>
<script type="text/javascript" src="common_i18n.js"></script>
<script type="text/javascript" src="common.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
</head>
<body class="exe-web-site" id="exe-node-62"><script type="text/javascript">document.body.className+=" js"</script>
<div id="content">
<p id="skipNav"><a href="#main" class="sr-av">Saltar la navegación</a></p>
<div id="header" ><div id="headerContent">Fundamentos de JAVA WEB</div></div>
<div id="siteNav">
<ul>
   <li><a href="index.html" class="daddy main-node">Java Web</a></li>
   <li><a href="introduccin.html" class="daddy">Introducción</a>
   <ul class="other-section">
      <li><a href="patrn_de_arquitectura_mvc.html" class="no-ch">Patrón de Arquitectura MVC</a></li>
      <li><a href="mvc_en_escritorio.html" class="no-ch">MVC en Escritorio</a></li>
      <li><a href="mvc_en_web.html" class="no-ch">MVC en WEB</a></li>
   </ul>
   </li>
   <li><a href="instalacin_de_herramientas.html" class="daddy">Instalación de Herramientas</a>
   <ul class="other-section">
      <li><a href="configurando_el_ambiente_de_desarrollo.html" class="no-ch">Configurando el Ambiente de Desarrollo</a></li>
      <li><a href="creacin_de_un_proyecto_web.html" class="no-ch">Creación de un proyecto Web</a></li>
   </ul>
   </li>
   <li><a href="principios_tecnolgicos.html" class="daddy">Principios Tecnológicos</a>
   <ul class="other-section">
      <li><a href="servlets.html" class="daddy">Servlets</a>
      <ul class="other-section">
         <li><a href="ciclo_de_vida.html" class="no-ch">Ciclo de Vida</a></li>
         <li><a href="servlet_hola_mundo.html" class="no-ch">Servlet: Hola Mundo</a></li>
         <li><a href="recogiendo_parmetros.html" class="no-ch">Recogiendo parámetros</a></li>
         <li><a href="reenvo_entre_componentes.html" class="no-ch">Reenvío entre componentes</a></li>
      </ul>
      </li>
      <li><a href="jsp.html" class="daddy">JSP</a>
      <ul class="other-section">
         <li><a href="cdigo_java_no_recomendado.html" class="no-ch">Código Java: No recomendado</a></li>
         <li><a href="jstl.html" class="no-ch">JSTL</a></li>
         <li><a href="jstl_instalacin_y_uso.html" class="no-ch">JSTL: Instalación y Uso</a></li>
         <li><a href="ejercicios.html" class="no-ch">Ejercicios</a></li>
      </ul>
      </li>
      <li><a href="javabeans.html" class="no-ch">JavaBeans</a></li>
      <li><a href="ejemplo_mvc.html" class="no-ch">Ejemplo MVC</a></li>
      <li><a href="persistencia_jdbc.html" class="daddy">Persistencia JDBC</a>
      <ul class="other-section">
         <li><a href="jdbc_instalacin_y_uso.html" class="no-ch">JDBC: Instalación y Uso</a></li>
         <li><a href="ejemplo.html" class="no-ch">Ejemplo</a></li>
      </ul>
      </li>
   </ul>
   </li>
   <li class="current-page-parent"><a href="jpa.html" class="current-page-parent daddy">JPA</a>
   <ul>
      <li><a href="patrones_de_diseo_repaso.html" class="daddy">Patrones de Diseño (repaso)</a>
      <ul class="other-section">
         <li><a href="singleton.html" class="no-ch">Singleton</a></li>
      </ul>
      </li>
      <li><a href="patrones_de_acceso_a_datos.html" class="daddy">Patrones de Acceso a Datos</a>
      <ul class="other-section">
         <li><a href="activerecord.html" class="no-ch">ActiveRecord</a></li>
         <li><a href="dao_data_acces_object.html" class="no-ch">DAO (Data Acces Object)</a></li>
      </ul>
      </li>
      <li><a href="instalacin.html" class="no-ch">Instalación</a></li>
      <li><a href="arquitectura.html" class="no-ch">Arquitectura</a></li>
      <li><a href="entitymanger.html" class="no-ch">EntityManger</a></li>
      <li><a href="entidades.html" class="no-ch">Entidades</a></li>
      <li><a href="ciclo_de_vida0.html" class="no-ch">Ciclo de Vida</a></li>
      <li><a href="relaciones.html" class="daddy">Relaciones</a>
      <ul class="other-section">
         <li><a href="anotaciones.html" class="no-ch">Anotaciones</a></li>
         <li><a href="onetoone.html" class="no-ch">OneToOne</a></li>
         <li><a href="onetomany_y_manytoone.html" class="no-ch">OneToMany y ManyToOne</a></li>
         <li><a href="manytomany.html" class="no-ch">ManyToMany</a></li>
         <li><a href="herencia.html" class="no-ch">Herencia</a></li>
      </ul>
      </li>
      <li><a href="ejemplo_anotaciones_clase_estudiante.html" class="daddy">Ejemplo Anotaciones: Clase Estudiante</a>
      <ul class="other-section">
         <li><a href="ejercicio_tutorias.html" class="no-ch">Ejercicio: Tutorias</a></li>
      </ul>
      </li>
      <li><a href="implementacin_patrn_dao.html" class="daddy">Implementación patrón DAO</a>
      <ul class="other-section">
         <li><a href="cdigo_dao.html" class="no-ch">Código DAO</a></li>
      </ul>
      </li>
      <li id="active"><a href="jpql.html" class="active no-ch">JPQL</a></li>
   </ul>
   </li>
</ul>
</div>
<div id='topPagination'>
<div class="pagination noprt">
<a href="cdigo_dao.html" class="prev"><span><span>&laquo; </span>Anterior</span></a>
</div>
</div>
<div id="main-wrapper">
<div id="main"><a name="main"></a>
<div id="nodeDecoration"><h1 id="nodeTitle">JPQL</h1></div>
<div class="iDevice_wrapper FileAttachIdeviceInc em_iDevice" id="id63">
<div class="iDevice emphasis1" >
<div class="iDevice_header"><h2 class="iDeviceTitle">Teoría y Conceptos</h2></div>
<div class="iDevice_inner">
<div class="iDevice_content_wrapper">
<div id="ta63_82" class="block iDevice_content">
<p>En el adjunto se encuentran las transparencias referentes a los conceptos sobre el tema JPQL.</p>
</div>
<ul class='exeFileList'><li><a href='JPQL.pdf' target='_blank'>JPATutoriasJPQL.zip<span> (Ventana nueva)</span></a></li>
</ul></div>
</div>
</div>
</div>
<div class="iDevice_wrapper CasestudyIdevice em_iDevice" id="id64">
<div class="iDevice emphasis1" >
<div class="iDevice_header"><h2 class="iDeviceTitle">Caso práctico</h2></div>
<div class="iDevice_inner">
<div class="iDevice_content_wrapper">
<div id="ta64_94" class="block iDevice_content">

</div>
<div id="taquesQuestion0b64" class="block iDevice_content">
<div class="iDevice_inner">
<div class="iDevice_content_wrapper">
<div id="ta28_42_2" class="block iDevice_content">
<p><span style="font-size: small;">En un papel escribe las siguientes consultas JPQL para cumplir con las siguientes peticiones:</span></p>
<ol>
<li><span style="font-size: small;">Listar todos los estudiantes.</span></li>
<li><span style="font-size: small;">Listar los estudiantes, donde su nombre inicie con la letra C</span></li>
<li><span style="font-size: small;">Listar el nombre de los estudiantes y profesores que tienen asignada una tutoría.</span></li>
<li><span style="font-size: small;">Listar el nombre de los profesores y el nombre del departamento al que pertenecen.</span></li>
<li><span style="font-size: small;">Listar los profesores con los cuales el estudiante de id=5, tiene tutorías.</span></li>
</ol></div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="iDevice_wrapper MultiSelectIdevice em_iDevice" id="id65">
<div class="iDevice emphasis1" >
<div class="iDevice_header"><h2 class="iDeviceTitle">Pregunta de Selección Múltiple</h2></div>
<div class="iDevice_inner">
<div class="iDevice_content_wrapper">
<div class="question">
<div id="actitity-65_108">
<form name="multi-select-form-65_108" action="#" class="activity-form multi-select-form">
<h3 class="js-sr-av">Pregunta</h3>
<div id="taquestion65_108" class="block question iDevice_content">
<p>Cuál es el método del EntityManager por el cual se crean sentencias JPQL anotadas en la cabecera de la Entidad o en archivos XML?</p>
</div>
<div class="iDevice_answers">
<h4 class="js-sr-av">Respuestas</h4>
<div class="iDevice_answer">
<p class="iDevice_answer-field js-required">
<label for="op65_1080" class="sr-av"><a href="#answer-65_111">Opción 1</a></label><input type="checkbox" id="op65_1080" value="True" />
</p>
<div class="iDevice_answer-content" id="answer-65_111"><a name="answer-65_111"></a>
<div id="taans65_111" class="block iDevice_content">
<p>createNativeQuery</p>
</div>
</div>
<div class="iDevice_answer-feedback feedback" id="feedback-65_1080" style="display:none"></div>
</div>
<div class="iDevice_answer">
<p class="iDevice_answer-field js-required">
<label for="op65_1081" class="sr-av"><a href="#answer-65_318">Opción 2</a></label><input type="checkbox" id="op65_1081" value="False" />
</p>
<div class="iDevice_answer-content" id="answer-65_318"><a name="answer-65_318"></a>
<div id="taans65_318" class="block iDevice_content">
<p>createNameQuery</p>
</div>
</div>
<div class="iDevice_answer-feedback feedback" id="feedback-65_1081" style="display:none"></div>
</div>
<div class="iDevice_answer">
<p class="iDevice_answer-field js-required">
<label for="op65_1082" class="sr-av"><a href="#answer-65_320">Opción 3</a></label><input type="checkbox" id="op65_1082" value="True" />
</p>
<div class="iDevice_answer-content" id="answer-65_320"><a name="answer-65_320"></a>
<div id="taans65_320" class="block iDevice_content">
<p>createQuery</p>
</div>
</div>
<div class="iDevice_answer-feedback feedback" id="feedback-65_1082" style="display:none"></div>
</div>
</div>
<div class="block iDevice_buttons feedback-button js-required">
<p>
<input type="button" name="submitSelect" class="feedbackbutton multi-select-feedback-toggler" value="Mostrar retroalimentación" id="multi-select-feedback-toggler-3-65_108" /> 
</p>
</div>
<div id="f65_108" class="js-hidden js-feedback">
<h4 class="js-sr-av">Retroalimentación</h4>

<div id="tafeedback65_108" class="feedback iDevice_content">
<p><span style="font-family: courier new,courier;">createNativeQuery</span> es utilizado para realizar consultas mediante sentenicas SQL puras. Por otro lado <span style="font-family: courier new,courier;">createQuery</span> nos ayuda a crear consultas dinámicas. Las <span style="font-family: courier new,courier;">NameQuery</span>, son consultas que se anotan en la cabecera de la entidad o en un documento XML externo.</p>
</div>
</div>
</form>
<div class="iDevice_solution feedback js-hidden">
<h4>Solución</h4>
<ol>
<li><a href="#answer-65_111" class="right">Correcto</a></li>
<li><a href="#answer-65_318" class="wrong">Incorrecto</a></li>
<li><a href="#answer-65_320" class="right">Correcto</a></li>
</ol>
</div>
</div>
</div>
<div class="question">
<div id="actitity-65_322">
<form name="multi-select-form-65_322" action="#" class="activity-form multi-select-form">
<h3 class="js-sr-av">Pregunta</h3>
<div id="taquestion65_322" class="block question iDevice_content">
<p>La diferencia de SQL, JPQL realiza las consultas utilizando:</p>
</div>
<div class="iDevice_answers">
<h4 class="js-sr-av">Respuestas</h4>
<div class="iDevice_answer">
<p class="iDevice_answer-field js-required">
<label for="op65_3220" class="sr-av"><a href="#answer-65_325">Opción 1</a></label><input type="checkbox" id="op65_3220" value="True" />
</p>
<div class="iDevice_answer-content" id="answer-65_325"><a name="answer-65_325"></a>
<div id="taans65_325" class="block iDevice_content">
<p>tablas y objetos</p>
</div>
</div>
<div class="iDevice_answer-feedback feedback" id="feedback-65_3220" style="display:none"></div>
</div>
<div class="iDevice_answer">
<p class="iDevice_answer-field js-required">
<label for="op65_3221" class="sr-av"><a href="#answer-65_327">Opción 2</a></label><input type="checkbox" id="op65_3221" value="True" />
</p>
<div class="iDevice_answer-content" id="answer-65_327"><a name="answer-65_327"></a>
<div id="taans65_327" class="block iDevice_content">
<p>tablas y sus columnas</p>
</div>
</div>
<div class="iDevice_answer-feedback feedback" id="feedback-65_3221" style="display:none"></div>
</div>
<div class="iDevice_answer">
<p class="iDevice_answer-field js-required">
<label for="op65_3222" class="sr-av"><a href="#answer-65_329">Opción 3</a></label><input type="checkbox" id="op65_3222" value="True" />
</p>
<div class="iDevice_answer-content" id="answer-65_329"><a name="answer-65_329"></a>
<div id="taans65_329" class="block iDevice_content">
<p>atributos de entidades</p>
</div>
</div>
<div class="iDevice_answer-feedback feedback" id="feedback-65_3222" style="display:none"></div>
</div>
<div class="iDevice_answer">
<p class="iDevice_answer-field js-required">
<label for="op65_3223" class="sr-av"><a href="#answer-65_331">Opción 4</a></label><input type="checkbox" id="op65_3223" value="False" />
</p>
<div class="iDevice_answer-content" id="answer-65_331"><a name="answer-65_331"></a>
<div id="taans65_331" class="block iDevice_content">
<p>entidades y sus atributos</p>
</div>
</div>
<div class="iDevice_answer-feedback feedback" id="feedback-65_3223" style="display:none"></div>
</div>
</div>
<div class="block iDevice_buttons feedback-button js-required">
<p>
<input type="button" name="submitSelect" class="feedbackbutton multi-select-feedback-toggler" value="Mostrar retroalimentación" id="multi-select-feedback-toggler-4-65_322" /> 
</p>
</div>
<div id="f65_322" class="js-hidden js-feedback">
<h4 class="js-sr-av">Retroalimentación</h4>

</div>
</form>
<div class="iDevice_solution feedback js-hidden">
<h4>Solución</h4>
<ol>
<li><a href="#answer-65_325" class="right">Correcto</a></li>
<li><a href="#answer-65_327" class="right">Correcto</a></li>
<li><a href="#answer-65_329" class="right">Correcto</a></li>
<li><a href="#answer-65_331" class="wrong">Incorrecto</a></li>
</ol>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="iDevice_wrapper activityIdevice em_iDevice" id="id66">
<div class="iDevice emphasis1" >
<div class="iDevice_header"><h2 class="iDeviceTitle">Actividad</h2></div>
<div class="iDevice_inner">
<div class="iDevice_content_wrapper">
<div id="ta66_49_2" class="block iDevice_content">
<p style="text-align: justify;">Para poner en práctica los conocimientos de JPQL, en nuestro caso de estudio Tutorías, vamos a agregar tres métodos o funcionalidades de negocio que se describen en la siguiente tabla. La columna <strong>Método de Negocio</strong> es la descripción de la funcionalidad que se requiere. La columna <strong>Nombre a Utilizar</strong> es el nombre de la función o método a nivel de código que utilizaremos para representar dicha funcionalidad. En la tercera columna, se encuentra la estrategia de consulta que utilizaremos con el fin de practicar las tres formas que tenemos para realizar consultas en JPA.</p>
<table style="width: 90%; margin-left: auto; margin-right: auto;" border="1" cellpadding="2" cellspacing="2">
<tbody>
<tr>
<td valign="top" width="158">
<p><span style="color: #993300;"><strong>Método de Negocio<br /></strong></span></p>
</td>
<td valign="top" width="124">
<p><span style="color: #993300;"><strong>Nombre a utilizar<br /></strong></span></p>
</td>
<td valign="top" width="153">
<p><span style="color: #993300;"><strong>Estrategia de Consulta de JPQL<br /></strong></span></p>
</td>
</tr>
<tr>
<td valign="top" width="158">
<p>Dado un identificador de Departamento, listaremos todos los estudiantes que tienen tutorías relacionadas con el Departamento indicado.</p>
</td>
<td valign="top" width="124">
<p>getEstudiantesByDepartamento</p>
</td>
<td valign="top" width="153">
<p><b>Consulta Dinámica</b></p>
</td>
</tr>
<tr>
<td valign="top" width="158">
<p>Listar todos los estudiantes, donde su apellido inicia con una letra dada.</p>
</td>
<td valign="top" width="124">
<p>getEstudiantesByApellidoLetra</p>
</td>
<td valign="top" width="153">
<p><b>NameQuery</b></p>
</td>
</tr>
<tr>
<td valign="top" width="158">
<p>Listar todos los estudiantes que tienen correo en gmail</p>
</td>
<td valign="top" width="124">
<p>getEstudianteByProveedorMail</p>
</td>
<td valign="top" width="153">
<p><b>SQL nativo</b></p>
</td>
</tr>
</tbody>
</table>
<p><span style="font-size: medium;"><b>Pasos previos para la práctica:</b></span></p>
<ol>
<li><span style="font-size: medium;">Descarga el proyecto JPATutoriasJPQL que se provee en la sección recursos de este apartado (ver última sección de esta página).</span></li>
<li><span style="font-size: medium;">Importa el Proyecto en Eclipse</span></li>
<li><span style="font-size: medium;">En la carpeta lib agrega las librerías de javax .persistence, el conector para mysql y EclipseLink.</span></li>
</ol>
<p><span style="font-size: medium;"><strong>Pasos para la Práctica</strong></span></p>
<p><span style="font-size: medium;"><strong>1.- En la Interfaz EstudianteDAO, que pertenece al paquete <span style="color: #ff0000;">xxx.dao</span> , agrega los tres métodos de firma:</strong></span></p>
<p><span style="font-family: courier new,courier; font-size: medium;"><b>public</b> List&lt;Estudiante&gt; <span style="color: #008000;">getEstudiantesByDepartamento</span>(<b>int</b> idDepartamento);</span><br /> <span style="font-family: courier new,courier; font-size: medium;"><b>public</b> List&lt;Estudiante&gt; <span style="color: #008000;">getEstudiantesByApellidoLetra</span>(String nombre);</span><br /> <span style="font-family: courier new,courier; font-size: medium;"><b>public</b> List&lt;Estudiante&gt;<span style="color: #008000;">getEstudianteByProveedorMail</span>();</span></p>
<p><span style="font-size: medium;"> </span></p>
<p><span style="font-size: medium;"><strong>2.- En la clase JPAEstudianteDAO ubicada en el paquete <span style="color: #ff0000;">XXX.jpa</span> y que corresponde a la implementación de la Interfaz EstudianteDAO, codifica la lógica de la consulta para cada uno de los métodos. Por ejemplo para el método <i>getEstudiantesByDepartamento(int idDepartamento)</i> tendrías lo siguiente:</strong></span></p>
<p><span style="font-family: courier new,courier; font-size: medium;"> String sentenceJPQL = "SELECT t.estudiante from Tutoria t WHERE t.profesor.departamento.id= :idDep";</span></p>
<p><span style="font-family: courier new,courier; font-size: medium;">Query query = <b>this</b>.em.createQuery(sentenceJPQL);</span><br /> <span style="font-family: courier new,courier; font-size: medium;">query.setParameter("idDep", idDepartamento);</span><br /> <span style="font-family: courier new,courier; font-size: medium;">@SuppressWarnings("unchecked")</span><br /> <span style="font-family: courier new,courier; font-size: medium;">List&lt;Estudiante&gt; resultado = query.getResultList();</span><br /> <span style="font-family: courier new,courier; font-size: medium;"><b>return</b> resultado;</span></p>
<p><span style="font-size: medium;"> NOTA: Recuerda que para el método <span style="color: #008000;"><em>getEstudiantesByApellidoLetra</em></span> , debes anotar la consulta en la cabecera de la Entidad <span style="color: #ff0000;">Estudiante</span> (ubicada en el paquete entidades)</span></p>
<p><span style="font-family: courier new,courier; font-size: medium;">@NamedQuery(name="estudiantesPorNombreLike", query="<span style="color: #008000;">SELECT c FROM Estudiante c WHERE c.apellido LIKE :letra</span>")</span></p>
<p><span style="font-size: medium;"> </span></p>
<p><span style="font-size: medium;"><strong>3.- Probando resultados</strong></span></p>
<p><span style="font-size: medium;">En el paquete xxx.ejecucion, se encuentra la clase <strong><span style="color: #ff0000;">Principal</span></strong>, que tiene el método <i>main</i>, creada para efectos únicamente de probar los ejercicios. Por lo cual lo que debes hacer aquí es escribir el código necesario para ejecutar las tres consultas creadas anteriormente.</span></p>
</div>
</div>
</div>
</div>
</div>
<div class="iDevice_wrapper FileAttachIdeviceInc em_iDevice" id="id67">
<div class="iDevice emphasis1" >
<div class="iDevice_header"><h2 class="iDeviceTitle">Recursos</h2></div>
<div class="iDevice_inner">
<div class="iDevice_content_wrapper">
<div id="ta67_82" class="block iDevice_content">
<p>Proyecto Eclipse para pa práctica de JPQL.</p>
</div>
<ul class='exeFileList'><li><a href='JPATutoriasJPQL.zip' target='_blank'>JPATutoriasJPQL.zip<span> (Ventana nueva)</span></a></li>
</ul></div>
</div>
</div>
</div>
<div id="packageLicense" class="cc cc-by-nc">
<p><span>Obra publicada con</span> <a rel="license" href="http://creativecommons.org/licenses/by-nc/3.0/">Licencia Creative Commons Reconocimiento No comercial 3.0</a></p>
</div>
</div>
</div>
<div id='bottomPagination'>
<div class="pagination noprt">
<a href="cdigo_dao.html" class="prev"><span><span>&laquo; </span>Anterior</span></a>
</div>
</div>
<div id="siteFooter">Created by Carlos Iniguez - Escuela Politécnica Nacional</div></div>
<script type="text/javascript" src="_intef_js.js"></script></body></html>